.. This document is written in reStructuredText, a simple and unobstrusive
.. markup language.  For an introductiont to reStructuredText see:
.. 
.. https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html
.. 
.. Lines like this which start with `.. ` are comments which won't appear
.. in the generated output.
.. 
.. To apply for a GSoC project with Xapian, please fill in the template below.
.. Placeholder text for where you're expected to write something says "FILLME"
.. - search for this in the generated PDF to check you haven't missed anything.
.. 
.. See our GSoC Project Ideas List for some suggested project ideas:
.. https://trac.xapian.org/wiki/GSoCProjectIdeas
..
.. You are also most welcome to propose a project based on your own ideas.
.. 
.. From experience the best proposals are ones that are discussed with us and
.. improved in response to feedback.  You can share draft applications with
.. us by forking the git repository containing this file, filling in where
.. it says "FILLME", committing your changes and pushing them to your fork,
.. then opening a pull request to request us to review your draft proposal.
.. You can do this even before applications officially open.
.. 
.. IMPORTANT: Your application is only valid is you upload a PDF of your
.. proposal to the GSoC website at https://summerofcode.withgoogle.com/ - you
.. can generate a PDF of this proposal using "make pdf".  You can update the
.. PDF proposal right up to the deadline by just uploading a new file, so don't
.. leave it until the last minute to upload a version.  The deadline is
.. strictly enforced by Google, with no exceptions no matter how creative your
.. excuse.
.. 
.. If there is additional information which we haven't explicitly asked for
.. which you think is relevant, feel free to include it. For instance, since
.. work on Xapian often draws on academic research, it's important to cite
.. suitable references both to support any position you take (such as
.. 'algorithm X is considered to perform better than algorithm Y') and to show
.. which ideas underpin your project, and how you've had to develop them
.. further to make them practical for Xapian.
.. 
.. You're welcome to include diagrams or other images if you think they're
.. helpful - for how to do this see:
.. https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#images
.. 
.. Please take care to address all relevant questions - attention to detail
.. is important when working with computers!
.. 
.. If you have any questions, feel free to come and chat with us on IRC, or
.. send a mail to the mailing lists.  To answer a very common question, it's
.. the mentors who between them decide which proposals to accept - Google just
.. tell us HOW MANY we can accept (and they tell us that AFTER student
.. applications close).
.. 
.. Here are some useful resources if you want some tips on putting together a
.. good application:
.. 
.. "Writing a Proposal" from the GSoC Student Guide:
.. https://google.github.io/gsocguides/student/writing-a-proposal
.. 
.. "How to write a kick-ass proposal for Google Summer of Code":
.. https://teom.wordpress.com/2012/03/01/how-to-write-a-kick-ass-proposal-for-google-summer-of-code/

======================================
Weighting Schemes
======================================

About You
=========

 * Name: Sourav Saha

 * E-mail address: souravsaha.juit@gmail.com

 * IRC nickname(s): sourav

 * Any personal websites, blogs, social media, etc: 

 * github URL: https://github.com/souravsaha

 * Biography:

.. Tell us a bit about yourself.

I am pursuing M.Tech.(Master of Technology) in Computer Science from ISI Kolkata. Before that, I worked
for 2.5 years in Oracle as an Applications Engineer, and for 6 months at ServiceNow as a 
Platform Engineer. I did my B.E. from Jadavpur University in Information Technology during
2011-2015.

Background Information
----------------------

.. The answers to these questions help us understand you better, so that we can
.. help ensure you have an appropriately scoped project and match you up with a
.. suitable mentor or mentors.  So please be honest - it's OK if you don't have
.. much experience, but it's a problem if we aren't aware of that and propose
.. an overly ambitious project.

**Have you taken part in GSoC and/or GCI (https://codein.withgoogle.com/) and/or
similar programmes before?  If so, tell us about how it went, and any areas you
would have liked more help with.**

No, I have not taken any part in GSoc and/or GCI. I am applying for GSoc for first time.

**Please tell us about any previous experience you have with Xapian, or other
systems for indexed text search.**

I am familiar with Lucene, an Apache licenced search engine written in Java.
I am currently involved in a project in which I am building a retrieval model explainer on top of Lucene. 
As a user, I am aware Xapian as the search engine within the synaptic package manager used by many GNU/Linux distributions.

**Tell us about any previous experience with Free Software and Open Source
other than Xapian.**

Web programming and created a dictionary app with React Javascript library. I have implemented 
some modules within the Lucene library system. All of them are there in the github repository. All my contributions are available
from my github repository at https://github.com/souravsaha.

**What other relevant prior experience do you have (courses taken at college,
hobbies, holiday jobs, etc)?**

**Courses taken at college**: Machine Learning, Probability and Stochastic Process, Software Enginnering, Algebra.
Extensive programming in C++, Java. Started learning about Information Retrieval models with hands-on experience of Lucene.

**Summer Research Fellowship Programme - 2014, Indian Academy of Sciences**

**Advisor**: Subhasis Chaudhuri, Prof. of Electrical Engineering, IIT Bombay.

**Internship** : Worked on Human pose estimation from streams of videos using OpenCV C++ library. 
Published one paper entitled with :
*“Vision Based Human Pose Estimation for Virtual Cloth Fitting”. Sourav Saha, Pritha Ganguly, Subhajit Chaudhury, 
Indian Conference on Computer Vision, Graphics, and Image Processing (ICVGIP-2014) which is one of the top conferences for
Computer Vision in India, (ACM Conference).*  

I have developed an Atlassian Jira utility for bulk insertion/updating of different tracking tickets.

**What development platforms, tools and methods do you prefer to use?**

GNU toolchain, valgrind, underlying operating system.

**Have you previously worked on a project of a similar scope?  If so, tell us
about it.**

**Project in ServiceNow**: Worked on Virtual Agent Designer for chat-bot systems.
It's a flow based designer where one can design their own virtual agent conversation
and automate several processes. The entire source code was in git, have familiarity with
git based version control system.

**Project in Oracle**: Part of Student Admissions module which helps the admin of universities to create or design a custom application forms.
Developed RESTful apis for student application forms design. Worked on distributed environment where all the developers were working 
from different parts of the globe. Received pacesetter award for FY2017.

Developed utility to aid in bulk creation/updating of issues/tickets in a project tracker based
on Atlassian Jira. Worked on mainly proprietary code management environment. 



**What timezone will you be in during the coding period?**

IST (Indian Standard Timezone).

**Will your Summer of Code project be the main focus of your time during the
program?**

If my proposal is selected, I will do it as part of the summer project/ internship that is atleast 8 weeks 
in my curricular requirement of the M.Tech program that I am enrolled in. Further, I will be able to continue 
for the full 13 week period given my prior interest in the work and some initial experience.

**Expected work hours (e.g. Monday–Friday 9am–5pm UTC)**

Monday-Friday 9:30am-6pm IST.


**Are you applying for other projects in GSoC this year?  If so, with which
organisation(s)?**

.. We understand students sometimes want to apply to more than one org and
.. we don't have a problem with that, but it's helpful if we're aware of it
.. so that we know how many backup choices we might need.

No, I am not applying for any other project.

Your Project
============

Motivations
-----------

**Why have you chosen this particular project?**

My research interests are in the field of Information Retrieval. I have gone through some lecture materials (Victor Lavrenko), 
tutorials and research papers in the field of Information Retrieval. I have started working on an "explainer" for Lucene, which is 
widely used in academics as well as in industry. Our "explainer" is intended to help researchers and engineers provide high-level,
intuitive explanations of why an IR technique performs the way it does, rather than simply finding out whether it works well or
poorly. The explainer is implemented as a terminal-based interactive tool built on top of Lucene. An article describing this tool 
has been submitted as a demo paper to **SIGIR 19**. While working on this explainer, I had a chance to look at and modify the innards of 
an industry-strength search system. This made me curious about other open source search system used in real-life (as opposed to the ones used for academic 
research), and I discovered Xapian.

**Who will benefit from your project and in what ways?**

.. For example, think about the likely user-base, what they currently have to
.. do and how your project will improve things for them.

I hope to contribute to the Xapian code base by fixing bugs in some of Xapian's term weighting schemes and implementing a
new language model named log-logistic in the Xapian project. The researchers who proposed the log-logistic model conducted 
experiments that show that this model works well on news data and catalogue data. Since
the current user group of Xapian (https://xapian.org/users) includes applications in these categories (e.g., “Die Zeit - German Newspaper”, 
which uses Xapian for searching news articles, and Websites like TheyWorkForYou.com, http://www.debian.org and http://wiki.debian.org with similar
requirements), I believe these bug-fixes and the new weighting method would provide a number of Xapian users with more 
and better options.


Project Details
---------------

.. Please go into plenty of detail in this section.

**Describe any existing work and concepts on which your project is based.**

Traditional explanations of the Language Modelling approach to IR do not
always explicitly show how the IDF effect is to be incorporated within this
model. Possibly as a result of this, Xapian implements the following,
commonly used formula (when using the Jelinek Mercer smoothing model):

Weight of term t in document d = lambda * (tf(q, D) / doc_length ) + (1 - lambda) * ( collection_frequency(q) / collection_size)

Based on my readings (e.g., Lv and Zhai, CIKM 2011), I believe it would be
better to use the following formula instead:

lambda / (1 - lambda) * ( tf(q, D) * collection_size / doc_length * collection_frequency(q) ) + 1 

Our own preliminary experiments using Lucene with TREC data confirm that
the second formula produces significantly better retrieval accuracy. I
would therefore like to implement and test this change within Xapian as
well.

Relevant scholarly work related to Weighting schemes:

*Stéphane Clinchant, Éric Gaussier. “Retrieval Constraints and Word
Frequency Distributions - A Log-logistic Model for IR”. Information
Retrieval Journal, Springer, 2011, 14 (1), pp.5-25 (preprint available from https://hal.archives-ouvertes.fr/hal-00742020 )*.

It is a simplified variant of DFR model. In the above paper it shows that it gives better
result compared to DFR. In the news data and catalog data it provides competitive performance. 

**Do you have any preliminary findings or results which suggest that your
approach is possible and likely to succeed?**

The prerequisite statistics collection size, term frequency, wdf, relative term frequency - all
are already implemented in the Xapian codebase. So, without worrying the major changes in the 
Xapian indexing model it can be implemented. The final equation of the loglogistic model looks like:

x_q * log (1 + c * (x_d * avdl / y) / ( F / N))

where 
c = some constant

x_d = number of occurences of the term in document d

x_q = number of occurences of the term in query q

avdl = average length of the document in the collection

y = length of the document d

F = number of occurences of the term in the whole collection

N = number of documents 

**What other approaches to have your considered, and why did you reject those in
favour of your chosen approach?**

All other term weighting schemes are already implemented in Xapian codebase, this is like a natural
extension to DFR model. 

**Please note any uncertainties or aspects which depend on further research or
investigation.**

All other major weighting schemes are there in Xapian codebase. This model is majorly an extension of
the popular DFR model. DFR model is already there in Xapian code structure. Therefore there is no major uncertainties
implementing this language model as this is just a simplified version of DFR. 

**How useful will your results be when not everything works out exactly as
planned?**

Loglogistic model will be a child class of the Weight class and it will inherit all the properties of 
it. Inside the child class i.e the Loglogistic class, first we will have default and parameterized 
constructors. A method to initialize all the parameter of the model. Serialize and unserialize methods 
to serialize and unserialize the parameters. Also the get_sum_part and get_max_part apis to compute the
total score by evaluating each query. 

Project Timeline
----------------

.. We want you to think about the order you will work on your project, and
.. how long you think each part will take.  The parts should be AT MOST a
.. week long, or else you won't be able to realistically judge how long
.. they might take.  Even a week is too long really.  Try to break larger
.. tasks down into sub-tasks.
.. 
.. The timeline helps both you and us to know what you should do next, and how
.. on track you are.  Your plan certainly isn't set in stone - as you work on
.. your project, it may become clear that it is better to work on aspects in a
.. different order, or you may some things take longer than expected, and the
.. scope of the project may need to be adjusted.  If you think that's the
.. case during the project, it's better to talk to us about it sooner rather
.. than later.
.. 
.. You should strive to break your project down into a series of stages each of
.. which is in turn divided into the implementation, testing, and documenting of
.. a part of your project. What we're ideally looking for is for each stage to
.. be completed and merged in turn, so that it can be included in a future
.. release of Xapian. Even if you don't manage to achieve everything you
.. planned to, the stages you do complete are more likely to be useful if
.. you've structured your project that way. It also allows us to reliably
.. determine your progress, and should be more satisfying for you - you'll be
.. able to see that you've achieved something useful much sooner!
.. 
.. Look at the dates in the timeline:
.. https://summerofcode.withgoogle.com/how-it-works/
.. 
.. There are about 3 weeks of "community bonding" after accepted students are
.. announced.  During this time you should aim to complete any further research
.. or other issues which need to be done before you can start coding, and to
.. continue to get familiar with the code you'll be working on.  Your mentors
.. are there to help you with this.  We realise that many students have classes
.. and/or exams in this time, so we certainly aren't expecting full time work
.. on your project, but you should aim to complete preliminary work such that
.. you can actually start coding at the start of the coding period.
.. 
.. The coding period is broken into three blocks of about 4 weeks each, with
.. an evaluation after each block.  The evaluations are to help keep you on
.. track, and consist of brief evaluation forms sent to GSoC by both the
.. student and the mentor, and a chance to explicitly review how your project
.. is going with Xapian mentors.
.. 
.. If you will have other commitments during the project time (for example,
.. any university classes or exams, vacations, etc), make sure you include them
.. in your project timeline.

**1st 4 week**
    
    1st week

    - Bug fixing in LM-JM model(incorporate idf)

    - Test, evaluate and compare retrieval accuracy on CLEF, FIRE datasets

    2nd week

    - Test, evaluate and compare retrieval accuracy on NTCIR datasets 

    - As it has catalog userbase we can run TEL dataset also

    3rd week

    - PR review

    - done changes as suggested by PR review

    - raise PR review again and merge the code

    4th week

    - Bug fixing in LM-DIR model(incorporate idf)

    - Test, evaluate and compare retrieval accuracy on CLEF, FIRE datasets

**2nd 4 week**

    1st week

    - Test, evaluate and compare retrieval accuracy on NTCIR, TEL datasets

    2nd week

    - PR review
    - code changes as suggested by PR review
    - raise a PR review again and merged

    3rd week

    - Start coding Log-logistic Model
    - Test, evaluate and compare retrieval accuracy on CLEF, FIRE datasets

**3rd 4 week**

    1st week

    - PR review
    - code changes as suggested by PR review
    - raise PR review and merge it

    2nd week

    - Test, evaluate and compare retrieval accuracy on NTCIR, TEL datasets

    3rd week

    - PR review 
    - code changes and merge
    
    4th week

    - PR review and code merge of IR evaluation
    - document the LM model and Loglogistic model properly. 

Previous Discussion of your Project
-----------------------------------

.. If you have discussed your project on our mailing lists please provide a
.. link to the discussion in the list archives.  If you've discussed it on
.. IRC, please say so (and the IRC handle you used if not the one given
.. above).

https://lists.xapian.org/pipermail/xapian-devel/2019-March/003310.html

Licensing of your contributions to Xapian
-----------------------------------------

**Do you agree to dual-license all your contributions to Xapian under the GNU
GPL version 2 and all later versions, and the MIT/X licence?**

For the avoidance of doubt this includes all contributions to our wiki, mailing
lists and documentation, including anything you write in your project's wiki
pages.

Yes, I agree to dual-license all my contributions to Xapian under the GNU 
GPL version 2 and all later versions, and the MIT/X licence.

.. For more details, including the rationale for this with respect to code,
.. please see the "Licensing of patches" section in the "HACKING" document:
.. https://trac.xapian.org/browser/git/xapian-core/HACKING#L1399

Use of Existing Code
--------------------

**If you already know about existing code you plan to incorporate or libraries
you plan to use, please give details.**

Not applicable.

.. Code reuse is often a desirable thing, but we need to have a clear
.. provenance for the code in our repository, and to ensure any dependencies
.. don't have conflicting licenses.  So if you plan to use or end up using code
.. which you didn't write yourself as part of the project, it is very important
.. to clearly identify that code (and keep existing licensing and copyright
.. details intact), and to check with the mentors that it is OK to use.